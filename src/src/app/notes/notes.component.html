<div class="noteInputForm">
    <form (submit)="addNote()" id="AddNoteForm" *ngIf="showInputForm">
        <input type="text" name="inputNote" placeholder="Enter Title..." class="note-input-title"
            [(ngModel)]="inputNoteTitle" />
        <textarea name="inputNoteTitle" [(ngModel)]="inputNoteText" class="note-input-text">
        </textarea>
        <div class="parent-note">
            <label for="parentNote">Parent Note</label>
            <select name="parentNote" class="note-input-parent" [(ngModel)]="inputNoteParent">
                <option value="-1">No Parent Note</option>
                <option *ngFor="let note of parentNotes; let i = index;" [value]="note.id">{{note.title}}</option>
            </select>
        </div>
        <input type="submit" value="Add Note" class="note-submit" />
    </form>
    <button class="btn toggle" (click)="toggleshowInputForm()">
        <span [hidden]="showInputForm">Show Form </span>
        <svg width="16" height="16" fill="currentColor" [class]="showInputForm ? 'reduceButton' : 'expandButton'" viewBox="0 0 16 16">
        </svg>
    </button>
</div>

<div class="NotesHeadline">
    <span (click)="FilterList(-1)">Notes ({{allNotes.length}})</span>
    <div class="SearchForm">
        <span>Search: </span>
        <input type="text" class="searchInput" [(ngModel)]="searchTerm" (blur)="FilterList(-1)" />
    </div>
</div>

<div class="notes-area">
    <div class="notes-tree">
        <div class="tree-note" *ngFor="let note of allNotes; let i = index;">
            <div class="parent" *ngIf="!note.parentId" (click)="FilterList(note.id)">
                {{note.title}}
            </div>
            <div class="child" *ngIf="note.parentId > 0">
                --- {{note.title}}
            </div>
        </div>
    </div>

    <div class="notes-list">
        <div class="note" *ngFor="let note of filteredNotes; let i = index;">

            <div [hidden]="note.isEditShow">
                <div class="NoteTitle">{{note.title}}</div>
                <div [hidden]="note.expanded" class="NoteText" (click)="expandNote(note)">{{note.description}}</div>
                <div [hidden]="!note.expanded" (click)="expandNote(note)">{{note.description}}</div>
            </div>

            <div class="editForm" [hidden]="!note.isEditShow">
                <input class="editContent" type="text" [(ngModel)]="note.title" />
                <textarea class="editContent" [(ngModel)]="note.description" rows="10"></textarea>
                <div class="parent-note">
                    <label for="editParentNote">Parent Note</label>
                    <select name="parentNote" class="note-input-parent" [(ngModel)]="note.parentId">
                        <option value="">No Parent Note</option>
                        <option *ngFor="let note of parentNotes; let i = index;" [value]="note.id">{{note.title}}</option>
                    </select>
                </div>
            </div>

            <div class="buttonBar">
                <span><small>c: {{note.created | date: 'dd/MM/yyyy'}}</small><small *ngIf="note.created !== note.updated"> / u: {{note.updated | date: 'dd/MM/yyyy'}}</small></span>
                <button [hidden]="note.isEditShow" class="btn" (click)="toggleEditDisplay(note)">
                    <svg width="16" height="16" fill="currentColor" class="editButton" viewBox="0 0 16 16">
                    </svg>
                </button>
                <button [hidden]="!note.isEditShow" class="btn" (click)="toggleEditDisplay(note)">
                    <svg width="16" height="16" fill="currentColor" class="updateButton" viewBox="0 0 16 16">
                    </svg>
                </button>
                <button [hidden]="!note.isEditShow" class="btn" (click)="toggleEditDisplay(note)">
                    <svg width="16" height="16" fill="currentColor" class="closeButton" viewBox="0 0 16 16">
                    </svg>
                </button>
                <button class="btn delete" (click)="removeNote(note.id)">
                    <svg width="16" height="16" fill="currentColor" class="deleteButton" viewBox="0 0 16 16">
                    </svg>
                </button>
            </div>
        </div>
    </div>
</div>